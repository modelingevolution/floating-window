@namespace ModelingEvolution.FloatingWindow

<div class="floating-window @(IsMinimized ? "minimized" : "")"
     style="@GetWindowStyle()"
     @ref="_windowElement"
     @attributes="AdditionalAttributes">

    <MudPaper Elevation="8" Class="floating-window-paper">
        <div class="floating-window-header"
             @onmousedown="OnHeaderMouseDown"
             @onmousedown:stopPropagation="true">
            <MudText Typo="Typo.subtitle1" Class="floating-window-title">@Title</MudText>
            <MudSpacer />
            <MudIconButton Icon="@Icons.Material.Filled.Minimize"
                           Size="Size.Small"
                           OnClick="ToggleMinimize"
                           Class="floating-window-btn" />
            @if (CanMaximize)
            {
                <MudIconButton Icon="@(IsMaximized ? Icons.Material.Filled.FilterNone : Icons.Material.Filled.CropSquare)"
                               Size="Size.Small"
                               OnClick="ToggleMaximize"
                               Class="floating-window-btn" />
            }
            @if (CanClose)
            {
                <MudIconButton Icon="@Icons.Material.Filled.Close"
                               Size="Size.Small"
                               OnClick="Close"
                               Class="floating-window-btn" />
            }
        </div>

        @if (!IsMinimized)
        {
            <div class="floating-window-content">
                @ChildContent
            </div>

            @if (CanResize && !IsMaximized)
            {
                <div class="floating-window-resize-handle"
                     @onmousedown="OnResizeMouseDown"
                     @onmousedown:stopPropagation="true">
                </div>
            }
        }
    </MudPaper>
</div>
